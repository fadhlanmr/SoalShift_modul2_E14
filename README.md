# SoalShift_modul2_E14
soal shift modul 2 sisop

# 1
Langkah pertama yaitu membuat program daemon yang berjalan tiap 5 detik (`sleep(10);`). Kemudian lakukan iterasi file dalam directory `/home/somi/modul2/soal1/` menggunakan fungsi `readdir();`. Informasi file yang terbaca akan disimpan dalam variabel `struct dirent *file;`. Langkah selanjutnya yaitu periksa apakah file tersebut ber-ekstensi `.png` dengan cara melihat apakah ada substring `".png"` di akhir nama file (`if (strstr(&file->d_name[strlen(file->d_name)-5], ".png"))`). Jika file tersebut ber-ekstensi `.png` maka ambil nama file tersebut tanpa ekstensinya dan simpan kedalam variabel `filename`. Kemudian tambahkan string `"_grey.png"` diakhir `filename`. Langkah terakhir yaitu mengubah nama file sekaligus memindahkannya ke folder `/home/somi/modul2/gambar/` dengan menggunakan fungsi `rename(old, new)`.

# 2
Langkah pertama yaitu membuat program daemon yang berjalan tiap 3 detik (`sleep(3);`). Kemudian periksa apakah terdapat file `elen.ku` pada folder `/home/somi/modul2/soal2/hatiku/` menggunakan fungsi `access();`. Jika ada maka langkah selanjutnya yaitu memastikan file dapat diakses dengan mengubah file permission menggunakan fungsi `chmod();` dengan flag `S_IRWXU|S_IRWXG|S_IRWXO` yang berarti memberikan akses read, write, execute kepada owner, group, dan other. Langkah selanjutnya yaitu mendapatkan data owner dan group file menggunakan fungsi `getpwuid();` dan `getgrgid();`. Data group dan owner file tersebut akan disimpan di variabel `struct group *grp;` dan `struct passwd *user;`. Kemudian kita dapat mengakses member dari variabel tersebut untuk mendapatkan nama owner dan groupnya (`user->pw_name` dan `grp->gr_name`). Langkah terakhir yaitu memeriksa apakah owner dan group file tersebut adalah `www-data`. Jika iya, maka hapus file tersebut menggunakan fungsi `remove();`.

# 3
Pada soal ini digunakan tiga exec yaitu untuk unzip, touch, dan ls. Pertama membuat fork untuk unzip file campur2.zip terlebih dahulu dengan command `execlp("unzip", "unzip", "campur2.zip", NULL)`. Kemudian membuat fork lagi untuk touch, yang digunakan untuk membuat file daftar.txt. Untuk meletakkan daftar file ke daftar.txt, digunakan file descriptor (dengan menggunakan command `pipe`). Kemudian digunakan exec untuk ls, namun sebelumnya file descriptor untuk read di close terlebih dahulu, dan digunakan comman `dup2` untuk membuat copy dari file descriptor. Setelah itu buka file descriptor berindex 0 ( hanya untuk read ), dan file daftar.txt untuk write daftar file yang memiliki ekstensi .txt ke daftar.txt ( untuk mencari file berekstensi .txt, menggunakan `strstr()`).

# 4
Langkah pertama yaitu membuat program daemon yang berjalan tiap 5 detik (`sleep(10);`). Kemudian simpan informasi dari file `makan_enak.txt` menggunakan fungsi `stat();`. Informasi tersebut disimpan di variabel `struct stat info;`. Kita dapat melihat waktu terakhir akses file di variabel member `info.st_atime`. Kita dapat melihat waktu sekarang menggunakan fungsi `time();`. Kedua waktu tersebut berbentuk detik terhitung semenjak waktu Epoch (1970-01-01 00:00:00 GMT). Langkah selanjutnya yaitu periksa apakah file `makan_enak.txt` pernah diakses setidaknya 30 detik yang lalu. Jika iya, maka buat file baru bernama `makan_sehat#.txt` dengan melakukan iterasi dari 1 sampai program menemukan file `makan_sehat#.txt` yang tidak ada. Kita dapat memeriksa apakah suatu file ada atau tidak dengan menggunakan fungsi `fopen(file, "r");`. Fungsi tersebut akan bernilai `NULL` jika file yang diminta tidak ada. Langkah terakhir yaitu membuat file `makan_sehat#.txt` menggunakan fungsi `fopen(file, "w");`.

# 5

